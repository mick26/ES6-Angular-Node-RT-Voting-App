<!-- 
Ref.
http://cmaurer.github.io/angularjs-nvd3-directives/pie.chart.html
-->

<div class="page-header">
	<h1>View Poll</h1>
</div>

<div class="well well-lg">
	<strong>Question</strong><br>{{poll.question}}
</div>

<div class="label label-info error" ng-bind="error">
</div>

<div>
	<p class="lead">Please select one of the following options:</p>

	<!--  
	Form with: 
	radio buttons -to select vote option
	button - to return to list of voting questions
	button - to vote on this current question
	-->
	<form role="form">
		<div ng-repeat="choice in poll.choices" class="radio">
			<label>
				<input type="radio" name="choice" ng-model="poll.userVote" 
					value="{{choice._id}}">
				{{choice.text}}
			</label>
		</div>

		<p><hr></p>

		<div class="row">
			<div class="col-xs-6">
				<a href="#/polls" class="btn btn-default" role="button">
					<span class="glyphicon glyphicon-arrow-left"></span> 
					Back to Poll List
				</a>
			</div>
			<div class="col-xs-6">
				<button class="btn btn-primary pull-right" ng-click="vote()">
					Vote &raquo;
				</button>
			</div>
		</div>
	</form>

</div>

	
<div ng-if="poll.totalVotes > 0">

	<!-- ==========================================
	Bar Chart 
	=========================================== -->
	<table class="result-table">

		<tr ng-repeat="choice in poll.choices">
			<td>{{choice.text}}</td>
			<td>
				<table style="background-color: lightblue; 
						width: {{choice.votes.length/poll.totalVotes*100}}%; 
						text-align: right">
					<tr><td>{{choice.votes.length}}</td></tr>
				</table>
			</td>
		</tr>

	</table>
			
	<p>
		<em>
			{{poll.totalVotes}} votes counted so far.
			<span ng-show="poll.userChoice">You voted for 
				<strong>{{poll.userChoice.text}}</strong>.
			</span>
		</em>
	</p>	
	<p><hr></p>


	<div class="row text-center">

	<!-- ==========================================
	Pie Chart 
	=========================================== -->
	<div class="well col-lg-5 col-lg-offset-3.5 col-md-6 col-md-offset-3  
		col-sm-12" id="pie-chart"> 

			<h2>Pie Chart</h2>
			<nvd3-pie-chart
		    	data = "pieData"
		        id = "exampleId"
		        width = "500"
		        height = "500"
		        x = "xFunction()"
		        y = "yFunction()"
		       	tooltips="true"
		       	color: "colorFunction()"
		       	showLegend="true"
		       	labelType="key"
		        showLabels="true">
		        <svg></svg>
		    </nvd3-pie-chart>
	    </div>
	</div>
</div>

<p>&nbsp;</p>

